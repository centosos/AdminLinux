# Вторая лабораторная работа

## Цель

Написать bash скрипт, анализирующий логи nginx

## Возможности

Он обладает следующими фичами:

- Имеет защиту от многократного запуска;
- Поддерживает поиск самых популярных и самых непопулярных ip, запросов по роутам, а так же список ошибок 4хх и 5хх;
- Проверяет наличие файла по указанному маршруту;
- Проверяет что по указанному пути находится непустой файл;

## Что нужно

1. bash;
2. git (чтобы скачать)

## Использование

1. Скачать репозиторий со скриптом;
2. Запустить скрипт с необходимыми параметрами. Первые 2 параметра обязательны.

```bash
./parser.sh <путь к файлу логов> <опция> <количество отображаемых результатов>
```

Аргументы:

- Поддерживаемые команды: toplinks - тот самых полярных ip, lowlinks - топ самых непопулярных ip, toproutes - топ самых популярных запросов по роутам, lowroutes - топ самых непопулярных запросов, errors - список запросов вернувшиш ошибки;
- Количество отображаемых результатов вводится в формате числа. если число не указано то по умолчанию будет показано 15 результатов;

Пример запуска запроса, выводящего 10 самых часто запрашиваемых ip:

```bash
./parser.sh logfile.log toplinks 10
```

## Список возвращаемых кодов

- 0 - успешное окончание работы скрипта;
- 1 - скрипт уже запущен;
- 2 - Не указаны все требуемые параметры;
- 3 - файл пуст или некорректен;
- 4 - имя файла пустое;
- 6 - неправильно указан параметр поиска.
